%-----------------------------------------------------------------%
%
% The latex macro of the SMiLe group.
%                                       by Han Liu
% This is the modified version used by Kaiqing Zhang
%-----------------------------------------------------------------%

\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{bm} 
\RequirePackage{url}
\usepackage{multirow}
\usepackage{natbib}
\usepackage{caption}
%\usepackage{subcaption}
\usepackage{graphicx}
%\usepackage{subfigure}
\usepackage{makecell}
\usepackage{booktabs}
\usepackage{array}
\usepackage{url}
\usepackage{algorithm}
\usepackage{algorithmic}
%\usepackage{dsfont}
\usepackage{mathtools}
\usepackage{wrapfig}
\usepackage{lipsum}
%\usepackage{mathrsfs}

%\usepackage{titling}
\usepackage{epstopdf}
\usepackage{bbm}
\usepackage{relsize}
\usepackage{color}
\usepackage{fixltx2e}


\usepackage{kpfonts}

\usepackage[colorlinks,
linkcolor=red,
%anchorcolor=blue
citecolor=blue
]{hyperref}
 

%\usepackage{hyperref} 
  
\let\hat\hat
\let\tilde\widetilde
\def\given{{\,|\,}}
\def\biggiven{{\,\big|\,}}
\def\Biggiven{{\,\Big|\,}}
\def\bigggiven{{\,\bigg|\,}}
\def\Bigggiven{{\,\Bigg|\,}}
\def\ds{\displaystyle}
\newcommand\wtilde{\stackrel{\sim}{\smash{\mathcal{W}}\rule{0pt}{1.1ex}}} 

%----- bold fonts -----%

\newcommand{\ab}{\mathrm{a}}
\newcommand{\bbb}{\mathrm{b}}
\newcommand{\cbb}{\mathrm{c}}
\newcommand{\db}{\mathrm{d}}
\newcommand{\eb}{\mathrm{e}}
\newcommand{\fb}{\mathrm{f}}
\newcommand{\gb}{\mathrm{g}}
\newcommand{\hb}{\mathrm{h}}
\newcommand{\ib}{\mathrm{i}}
\newcommand{\jb}{\mathrm{j}}
\newcommand{\kb}{\mathrm{k}}
\newcommand{\lb}{\mathrm{l}}
\newcommand{\mb}{\mathrm{m}}
\newcommand{\nbb}{\mathrm{n}}
\newcommand{\ob}{\mathrm{o}}
\newcommand{\pb}{\mathrm{p}}
\newcommand{\qb}{\mathrm{q}}
\newcommand{\rb}{\mathrm{r}}
\newcommand{\sbb}{\mathrm{s}}
\newcommand{\tb}{\mathrm{t}}
\newcommand{\ub}{\mathrm{u}}
\newcommand{\vb}{\mathrm{v}}
\newcommand{\wb}{\mathrm{w}}
\newcommand{\xb}{\mathrm{x}}
\newcommand{\yb}{\mathrm{y}}
\newcommand{\zb}{\mathrm{z}}

\newcommand{\ba}{\bm{a}}
\newcommand{\bb}{\bm{b}}
\newcommand{\bc}{\bm{c}}
\newcommand{\bd}{\bm{d}}
\newcommand{\be}{\bm{e}}
\newcommand{\bbf}{\bm{f}}
\newcommand{\bg}{\bm{g}}
\newcommand{\bh}{\bm{h}}
\newcommand{\bi}{\bmf{i}}
\newcommand{\bj}{\bm{j}}
\newcommand{\bk}{\bm{k}}
\newcommand{\bl}{\bm{l}}
\newcommand{\bbm}{\bm{m}}
\newcommand{\bn}{\bm{n}}
\newcommand{\bo}{\bm{o}}
\newcommand{\bp}{\bm{p}}
\newcommand{\bq}{\bm{q}}
\newcommand{\br}{\bm{r}}
\newcommand{\bs}{\bm{s}}
\newcommand{\bt}{\bm{t}}
\newcommand{\bu}{\bm{u}}
\newcommand{\bv}{\bm{v}}
\newcommand{\bw}{\bm{w}}
\newcommand{\bx}{\bm{x}}
\newcommand{\by}{\bm{y}}
\newcommand{\bz}{\bm{z}}




\newcommand{\Ab}{\mathrm{A}}
\newcommand{\Bb}{\mathrm{B}}
\newcommand{\Cb}{\mathrm{C}}
\newcommand{\Db}{\mathrm{D}}
\newcommand{\Eb}{\mathrm{E}}
\newcommand{\Fb}{\mathrm{F}}
\newcommand{\Gb}{\mathrm{G}}
\newcommand{\Hb}{\mathrm{H}}
\newcommand{\Ib}{\mathrm{I}}
\newcommand{\Jb}{\mathrm{J}}
\newcommand{\Kb}{\mathrm{K}}
\newcommand{\Lb}{\mathrm{L}}
\newcommand{\Mb}{\mathrm{M}}
\newcommand{\Nb}{\mathrm{N}}
\newcommand{\Ob}{\mathrm{O}}
\newcommand{\Pb}{\mathrm{P}}
\newcommand{\Qb}{\mathrm{Q}}
\newcommand{\Rb}{\mathrm{R}}
\newcommand{\Sbb}{\mathrm{S}}
\newcommand{\Tb}{\mathrm{T}}
\newcommand{\Ub}{\mathrm{U}}
\newcommand{\Vb}{\mathrm{V}}
\newcommand{\Wb}{\mathrm{W}}
\newcommand{\Xb}{\mathrm{X}}
\newcommand{\Yb}{\mathrm{Y}}
\newcommand{\Zb}{\mathrm{Z}}

\newcommand{\bA}{\bm{A}}
\newcommand{\bB}{\bm{B}}
\newcommand{\bC}{\bm{C}}
\newcommand{\bD}{\bm{D}}
\newcommand{\bE}{\bm{E}}
\newcommand{\bF}{\bm{F}}
\newcommand{\bG}{\bm{G}}
\newcommand{\bH}{\bm{H}}
\newcommand{\bI}{\bm{I}}
\newcommand{\bJ}{\bm{J}}
\newcommand{\bK}{\bm{K}}
\newcommand{\bL}{\bm{L}}
\newcommand{\bM}{\bm{M}}
\newcommand{\bN}{\bm{N}}
\newcommand{\bO}{\bm{O}}
\newcommand{\bP}{\bm{P}}
\newcommand{\bQ}{\bm{Q}}
\newcommand{\bR}{\bm{R}}
\newcommand{\bS}{\bm{S}}
\newcommand{\bT}{\bm{T}}
\newcommand{\bU}{\bm{U}}
\newcommand{\bV}{\bm{V}}
\newcommand{\bW}{\bm{W}}
\newcommand{\bX}{\bm{X}}
\newcommand{\bY}{\bm{Y}}
\newcommand{\bZ}{\bm{Z}}


%----- calligraphic fonts -----%

\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cK}{\mathcal{K}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cS}{{\mathcal{S}}}
\newcommand{\cT}{{\mathcal{T}}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}




%----- blackboard bold fonts-----%

\newcommand{\CC}{\mathbb{C}}
\newcommand{\EE}{\mathbb{E}}
\newcommand{\VV}{\mathbb{V}}
\newcommand{\II}{\mathbb{I}}
\newcommand{\KK}{\mathbb{K}}
\newcommand{\LL}{\mathbb{L}}
\newcommand{\MM}{\mathbb{M}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\SSS}{\mathbb{S}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\XX}{\mathbb{X}}
\newcommand{\YY}{\mathbb{Y}}
\newcommand{\OOmega}{\mathbb{\Omega}}




%----- bold greek fonts -----%

\newcommand{\balpha}{\bm{\alpha}}
\newcommand{\bbeta}{\bm{\beta}}
\newcommand{\bgamma}{\bm{\gamma}}
\newcommand{\bdelta}{\bm{\delta}}
\newcommand{\bepsilon}{\bm{\epsilon}}
\newcommand{\bvarepsilon}{\bm{\varepsilon}}
\newcommand{\bzeta}{\bm{\zeta}}
\newcommand{\btheta}{\pmb{\theta}}
\newcommand{\bvartheta}{\bm{\vartheta}}
\newcommand{\bkappa}{\bm{\kappa}}
\newcommand{\blambda}{\bm{\lambda}}
\newcommand{\bmu}{\bm{\mu}}
\newcommand{\bnu}{\bm{\nu}}
\newcommand{\bxi}{\bm{\xi}}
\newcommand{\bpi}{\bm{\pi}}
\newcommand{\bvarpi}{\bm{\varpi}}
\newcommand{\brho}{\bm{\varrho}}
\newcommand{\bsigma}{\bm{\sigma}}
\newcommand{\bvarsigma}{\bm{\varsigma}}
\newcommand{\btau}{\bm{\tau}}
\newcommand{\bupsilon}{\bm{\upsilon}}
\newcommand{\bphi}{\bm{\phi}}
\newcommand{\bvarphi}{\bm{\varphi}}
\newcommand{\bchi}{\bm{\chi}}
\newcommand{\bpsi}{\bm{\psi}}
\newcommand{\bomega}{\bm{\omega}  
}

\newcommand{\bGamma}{\bm{\Gamma}}
\newcommand{\bDelta}{\bm{\Delta}}
\newcommand{\bTheta}{\bm{\Theta}}
\newcommand{\bThetas}{\bm{\Theta}^*}
\newcommand{\bLambda}{\bm{\Lambda}}
\newcommand{\bXi}{\bm{\Xi}}
\newcommand{\bPi}{\bm{\Pi}}
\newcommand{\bSigma}{\bm{\Sigma}}
\newcommand{\bUpsilon}{\bm{\Upsilon}}
\newcommand{\bPhi}{\bm{\Phi}}
\newcommand{\bPsi}{\bm{\Psi}}
\newcommand{\bOmega}{\bm{\Omega}}


\newcommand{\vect}{\text{vec}}
\newcommand{\Card}{\text{Card}}
\newcommand{\rank}{\text{rank}}
\newcommand{\row}{\text{row}}
\newcommand{\col}{\text{col}}
\newcommand{\tTheta}{\tilde{\bTheta}}
\newcommand{\tdelta}{\tilde{\delta}}
\newcommand{\oR}{\bar{R}}
\newcommand{\ocR}{\bar{\cR}}
\newcommand{\oP}{\bar{P}}
\newcommand{\ocP}{\bar{\cP}}
\newcommand{\oV}{\bar{V}}
\newcommand{\oQ}{\bar{Q}}
\newcommand{\tQ}{\tilde{Q}}
\newcommand{\hQ}{\hat{Q}}
\newcommand{\tpi}{\tilde{\pi}}
\newcommand{\hpi}{\hat{\pi}}
\newcommand{\thpi}{\tilde{\hat{\pi}}}
\newcommand{\htpi}{\hat{\tilde{\pi}}}




%----- Some standard definitions -----%

\newcommand{\argmin}{\mathop{\mathrm{argmin}}}
\newcommand{\argmax}{\mathop{\mathrm{argmax}}}
\newcommand{\argmaxmin}{\mathop{\mathrm{argmaxmin}}}
\newcommand{\minimize}{\mathop{\mathrm{minimize}}}

\newcommand{\sign}{\mathop{\mathrm{sign}}}
\newcommand{\tr}{\mathop{\mathrm{Tr}}}

\DeclareMathOperator{\Var}{{\rm Var}}
\DeclareMathOperator*{\Cor}{\rm Corr}
\DeclareMathOperator*{\Cov}{\rm Cov}
\DeclareMathOperator*{\ind}{\mathds{1}}  % Indicator
\newcommand{\smallfrac}[2]{{\textstyle \frac{#1}{#2}}}  
                                                        
\newcommand*{\zero}{{\bm 0}}
\newcommand*{\one}{{\bm 1}}

\newcommand{\diag}{{\rm diag}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%% Norms

\newcommand{\norm}[1]{||#1||}
\newcommand{\bignorm}[1]{\bigg|\bigg|#1\bigg|\bigg|}
\newcommand{\opnorm}[2]{| \! | \! | #1 | \! | \! |_{{#2}}}

%%%%% Dot product
\newcommand{\dotp}[2]{\langle{#1},{#2}\rangle}

%%%%  brackets
\newcommand{\inner}[2]{\left\langle #1,#2 \right\rangle}
\newcommand{\rbr}[1]{\left(#1\right)}
\newcommand{\sbr}[1]{\left[#1\right]}
\newcommand{\cbr}[1]{\left\{#1\right\}}
\newcommand{\nbr}[1]{\left\|#1\right\|}
\newcommand{\abr}[1]{\left|#1\right|}

%%%%%%%%%  Other commands

\newcommand{\mcomment}[1]{\marginpar{\tiny{#1}}}
\newcommand{\fcomment}[1]{\footnote{\tiny{#1}}}
%\newcommand{\overbar}[1]{\mkern 2mu\overline{\mkern-2mu#1\mkern-2mu}\mkern 2mu}
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\newcommand{\ud}{{\mathrm{d}}}



%%%%%%%% Zhuoran Yang's Modifications %%%%%%%%

\newcommand{\Sc}{\cS^{\perp}}
\newcommand{\Ac}{\cA^{\perp}}
\newcommand{\supp}{\mathrm{supp}} %support
\newcommand{\tx}{\tilde{\bX}}
\newcommand{\tX}{\tilde{\bX}}
\newcommand{\hbbeta}{\hat{\bbeta}}
\newcommand{\hbdelta}{\hat{\bdelta}}
\newcommand{\tbbeta}{\tilde{\bbeta}}
\newcommand{\bbetas}{\bbeta^*}





\newcommand{\hbgamma} {\hat{\bgamma}}
\newcommand{\tbdelta}{\tilde \bmeta}
\newcommand{\htheta}{\hat \btheta}

\newcommand{\hOmega}{\hat{\bOmega}}
\newcommand{\hTheta}{\hat{\bTheta}}
\newcommand{\hSigma}{\hat{\bSigma}}
\newcommand{\tSigma}{\tilde{\bSigma}}
\newcommand{\hbomega}{\hat{\bomega}}
\newcommand{\hbvartheta}{\hat \bvartheta}

\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\limn}{\lim\limits_{n\rightarrow \infty} }

\newcommand{\loss}{\ell} %loss function

\newcommand{\grad}{\nabla \loss }
\newcommand{\hess}{\nabla^2\loss}


\newcommand{\halpha}{\hat\alpha}
\newcommand{\hdelta}{\hat\delta}
\newcommand{\lalpha}{\bar{\alpha}}


\newcommand\indep{\protect\mathpalette{\protect\independenT}{\perp}}
\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}

\def\##1\#{\begin{align}#1\end{align}}
\def\$#1\${\begin{align*}#1\end{align*}}

%%%%%%%%  amsmath %%%%%%%%%%
\newtheoremstyle{mytheoremstyle} % name
    {\topsep}                    % Space above
    {\topsep}                    % Space below
    {\normalfont}                   % Body font
    {}                           % Indent amount
    {\bfseries}                   % Theorem head font
    {.}                          % Punctuation after theorem head
    {.5em}                       % Space after theorem head
    {}  % Theorem head spec (can be left empty, meaning ‘normal’)

\theoremstyle{mytheoremstyle}

\ifx\BlackBox\undefined
\newcommand{\BlackBox}{\rule{1.5ex}{1.5ex}}  % end of proof
\fi

\ifx\QED\undefined
\def\QED{~\rule[-1pt]{5pt}{5pt}\par\medskip}
\fi

\ifx\proof\undefined
\newenvironment{proof}{\par\noindent{\bf Proof\ }}{\hfill\BlackBox\\[2mm]}
%\newenvironment{proof}{\emph{Proof. }}{ \hfill \QED}
\fi

\ifx\theorem\undefined
\newtheorem{theorem}{Theorem}
\fi
\ifx\example\undefined
\newtheorem{example}[theorem]{Example}
\fi
\ifx\property\undefined
\newtheorem{property}{Property}
\fi
\ifx\lemma\undefined
\newtheorem{lemma}[theorem]{Lemma}
\fi
\ifx\proposition\undefined
\newtheorem{proposition}[theorem]{Proposition}
\fi
\ifx\remark\undefined
\newtheorem{remark}[theorem]{Remark}
\fi
\ifx\corollary\undefined
\newtheorem{corollary}[theorem]{Corollary}
\fi
\ifx\definition\undefined
\newtheorem{definition}[theorem]{Definition}
\fi
\ifx\conjecture\undefined
\newtheorem{conjecture}[theorem]{Conjecture}
\fi
\ifx\fact\undefined
\newtheorem{fact}[theorem]{Fact}
\fi
\ifx\claim\undefined
\newtheorem{claim}[theorem]{Claim}
\fi
\ifx\assumption\undefined
\newtheorem{assumption}[theorem]{Assumption}
\fi
\numberwithin{equation}{section}
\numberwithin{theorem}{section}

